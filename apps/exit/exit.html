<head>

    <title>Exit Survey</title>
    <meta charset="utf-8" />
    <script src='../../../core/Store.js'></script>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
        crossorigin="anonymous">
    <link rel="stylesheet" href="./main.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.png">

    <!-- add modalbox css -->
    <link rel='stylesheet' type='text/css' media='all' href='../../components/modalbox/modalbox.css'/>
    <link rel='stylesheet' type='text/css' media='all' href='../../components/loading/loading.css'/>
    <script type='text/javascript' src='../../components/loading/loading.js' ></script>
    <script type='text/javascript' src='../../common/ajv.js'></script>
    <script type='text/javascript' src='../../common/util.js'></script>
    <script type='text/javascript' src='../../core/Validation.js'></script>
    <script type='text/javascript' src='../../core/Store.js'></script>
    <script type='text/javascript' src='../../components/modalbox/modalbox.js'></script>
    <style>
        .modalbox-header {
            text-align: center;
            font-weight: bold;
        }
        .btn {
            font-size: .8rem;
            height: 1.5rem;
            text-decoration: none;
            border-radius: 5px;
            cursor: pointer;
            appearance: none;
            -moz-appearance: none;
            -webkit-appearance: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;            
            background-color: transparent;
            /* color: #4d5968 !important; */
            letter-spacing: 0.05em;
            /* text-transform: uppercase; */
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            line-height:0;
            padding: 0 1rem;        
        }
        .btn.reset{
            color: #fff;
            background-color: #28a745;
            border-color: #28a745;
        }

        .btn.reset:hover {
            color: #fff;
            background-color: #218838;
            border-color: #1e7e34;
        }

        .btn.action{
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn.action:hover {
            color: #fff;
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .btn.action:disabled {
            background-color: #dddddd;
            border-color: #dddddd;
        }

        #email_div[data-error]:after {
            position: absolute;
            content: attr(data-error) !important;
            color: #800;
            font-size: .8rem;
            font-weight: bold;
            left: 83px;
            bottom: 80px;
            border: 1px #800 solid;
            background: white;
            overflow: hidden;
            white-space: nowrap;
            padding: 0 2px;
            border-radius: 5px;
        }
    </style>
</head>
<body>



<!-- Header -->

<div id='modalbox' ></div>
<header id="header">
    <label style="color:white;padding:0 15px;font-size:20px;">CaMicroscope</label>
</header>


<!-- Main -->

<section id="main" class="wrapper">

    <div class="inner">

        <header class="major">

            <h2>HTT Data Collection - Exit Survey</h2>

        </header>

        <!-- Content -->
        <div>The HTT team wants to thank you for your time and support of the High Throughput Truthing project mission, the exploration of ground truth methods to support algorithm validation in Digital Pathology.</div> 
        <br/>
        <div>Please complete the short survey below to help us further develop our platform and mission.</div>
        <br/>
        <div>We want to keep in touch, and we hope you do too. Let us know at the bottom how you would like to get involved!</div>
        <br/>
        <div>*=Required</div>

        <form class="row g-3 needs-validation" novalidate>
            <div class="mb-3">
                <label for="email" id="label-email">
                    Which email did you use to log in to your study? *
                </label>

                <input type="exitEmail" id="exitEmail" placeholder="Your answer" required>
                <div class="invalid-feedback">
                    Please enter your email.
                </div>
            </div>
            
            <div class="mb-3">
                <label for="update" id="label-update">
                    Are you willing to receive HTT email updates on study progress and results, 
                    as well as future opportunities to get involved? *
                </label>

                <div class="form-check">
                    <input class="form-check-input" type="radio" name="update" id="yes" value="Yes" required>
                    <label class="form-check-label" for="yes">
                    Yes
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="update" id="no" value="No" required>
                    <label class="form-check-label" for="no">
                    No
                    </label>
                </div>
            </div>

            <div class="mb-3">
                <label for="futureEmail" id="label-email">
                    If you answered 'yes' above, enter the email we may contact you by.
                </label>

                <input type="futureEmail" id="futureEmail" placeholder="Your answer">
            </div>

            <div class="form-group browsers">
                <label for="plat" id="label-plat">
                    I completed data collection on these platforms: (check all that apply) *
                </label>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="platform" id="eedap" value="eeDAP" required>
                    <label class="form-check-label" for="eedap">
                    eeDAP
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="platform" id="pathpresenter" value="PathPresenter" required>
                    <label class="form-check-label" for="pathpresenter">
                    PathPreseneter
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="platform" id="camicroscope" value="caMicroscope" required>
                    <label class="form-check-label" for="camicroscope">
                    caMicroscope
                    </label>
                </div>
            </div>

            <div class="form-group browsers">
                <label for="batch" id="label-batch">
                    I completed these batches: (check all that apply) *
                </label>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="one" value="completed" required>
                    <label class="form-check-label" for="one">
                    1
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="two" value="2" required>
                    <label class="form-check-label" for="two">
                    2
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="three" value="3" required>
                    <label class="form-check-label" for="three">
                    3
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="four" value="4" required>
                    <label class="form-check-label" for="four">
                    4
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="five" value="5" required>
                    <label class="form-check-label" for="five">
                    5
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="six" value="6" required>
                    <label class="form-check-label" for="six">
                    6
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="seven" value="7" required>
                    <label class="form-check-label" for="seven">
                    7
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="eight" value="8" required>
                    <label class="form-check-label" for="eight">
                    8
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="na" value="NA" required>
                    <label class="form-check-label" for="na">
                    I don't remember
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="batches" id="other" value="Other" required>
                    <label class="form-check-label" for="other">
                    Other <input type="otherText" id="otherInfo" placeholder="">
                    </label>
                </div>
            </div>

            <div class="mb-3">
                <label for="monitor" id="label-monitor">
                    If you completed this study using a digital platform: 
                    What is your monitor Resolution, Make, & Model? 
                    (if completed on the microscope, write 'N/A') *
                </label>

                <input type="monitorInfo" id="monitorInfo" placeholder="Your answer" required>
                <div class="invalid-feedback">
                    Please enter your monitor info.
                </div>
            </div>

            <div class="mb-3">
                <label for="training" id="label-training">
                    In which institution were you clinically trained? *
                </label>

                <input type="institution" id="institution" placeholder="Your answer" required>
                <div class="invalid-feedback">
                    Please enter where you were trained.
                </div>
            </div>

            <div class="mb-3">
                <label for="digital" class="form-label" id="digital">
                    What feedback do you have for the digital platform? 
                    (PathPresenter & CaMicroscope) *
                </label>

                <input type="digiFeedback" id="digiFeedback" placeholder="Your answer" required>
                <div class="invalid-feedback">
                    Please enter your feedback.
                </div>
            </div>

            <div class="mb-3">
                <label for="analog" class="form-label" id="analog">
                    What feedback do you have for the analog platform? (eeDAP + Microscope) *
                </label>

                <input type="anaFeedback" id="anaFeedback" placeholder="Your answer" required>
                <div class="invalid-feedback">
                    Please enter your feedback.
                </div>
            </div>

            <div class="form-group browsers">
                <label for="future" id="label-future">
                    I wish to get involved. I'm interested in helping the team with: 
                    (select all that apply) *
                </label>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="involve" id="source" value="Source" required>
                    <label class="form-check-label" for="source">
                    Sourcing glass slides & their scanned versions
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="involve" id="host" value="Host" required>
                    <label class="form-check-label" for="host">
                    Hosting an analog (microscope + eeDAP) data collection event at my clinical site
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="involve" id="educate" value="Educate" required>
                    <label class="form-check-label" for="educate">
                    Creating a Continuing Medical Education course in conjunction with this project
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="involve" id="spread" value="Spread" required>
                    <label class="form-check-label" for="spread">
                    Spreading the word & recruiting my colleagues to participate in online data collection
                    </label>
                </div><div class="form-check">
                    <input class="form-check-input" type="checkbox" name="involve" id="none" value="None" required>
                    <label class="form-check-label" for="none">
                        I do not have capacity to help at this time
                    </label>
            </div>
            
            <button type="submit" id="save" >Save</button>
        </form>

</section>



<!-- Footer -->

<footer id="footer">

    <div class="content">

        <div class="inner">



            <section class="about">

                U24 CA18092401A1, <b>Tools to Analyze Morphology and Spatially Mapped Molecular Data</b>
            </section>


        </div>

    </div>

</footer>





<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
<script src="./jquery.min.js"></script>

<script src="./jquery.dropotron.min.js"></script>

<script src="./jquery.scrollex.min.js"></script>

<script src="./skel.min.js"></script>

<script src="./util.js"></script>

<script>
    (function(){
        var requiredCheckboxes = $('.browsers :checkbox[required]');
        requiredCheckboxes.change(function(){
            if(requiredCheckboxes.is(':checked')) {
                requiredCheckboxes.removeAttr('required');
            } else {
                 requiredCheckboxes.attr('required', 'required');
            }
        });
    }); 
</script>

<script>
    (function () {
    'use strict'

    var requiredCheckboxes = $('.browsers :checkbox[required]');
    requiredCheckboxes.change(function(){
        if(requiredCheckboxes.is(':checked')) {
            requiredCheckboxes.removeAttr('required');
        } else {
            requiredCheckboxes.attr('required', 'required');
        }
    });

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')

    // Loop over them and prevent submission
    Array.prototype.slice.call(forms)
        .forEach(function (form) {
        form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
            }

            form.classList.add('was-validated')
        }, false)
        })
    })()
</script>

<script>
    const saveBtn = document.getElementById('save')
    saveBtn.addEventListener('click',()=>{
        const date = Date()
        const exitEmail = document.getElementById('exitEmail').value;
        const update = $("input:radio[name=update]:checked").val();
        const futureEmail = document.getElementById('futureEmail').value;
        const eeDAP = document.getElementById("eedap").checked;
        const pathpresenter = document.getElementById("pathpresenter").checked;
        const camicroscope = document.getElementById("camicroscope").checked;
        const batch1 = document.getElementById("one").checked;
        const batch2 = document.getElementById("two").checked;
        const batch3 = document.getElementById("three").checked;
        const batch4 = document.getElementById("four").checked;
        const batch5 = document.getElementById("five").checked;
        const batch6 = document.getElementById("six").checked;
        const batch7 = document.getElementById("seven").checked;
        const batch8 = document.getElementById("eight").checked;
        const batchNA = document.getElementById("na").checked;
        const batchOther = document.getElementById("other").checked;
        const otherInfo = document.getElementById('otherInfo').value;
        const monitorInfo = document.getElementById('monitorInfo').value;
        const institution = document.getElementById('institution').value;
        const digiFeedback = document.getElementById('digiFeedback').value;
        const anaFeedback = document.getElementById('anaFeedback').value;
        const source = document.getElementById("source").checked;
        const host = document.getElementById("host").checked;
        const educate = document.getElementById("educate").checked;
        const spread = document.getElementById("spread").checked;
        const none = document.getElementById("none").checked;
        console.log(date, exitEmail, update, futureEmail, eeDAP, pathpresenter, camicroscope, batch1, batch2, batch3, batch4, batch5, batch6, batch7, batch8, batchNA, batchOther, otherInfo, monitorInfo, institution, digiFeedback, anaFeedback, source, host, educate, spread, none);
        var exit={date, exitEmail, update, futureEmail, eeDAP, pathpresenter, camicroscope, batch1, batch2, batch3, batch4, batch5, batch6, batch7, batch8, batchNA, batchOther, otherInfo, monitorInfo, institution, digiFeedback, anaFeedback, source, host, educate, spread, none}
        store.addExit(exit).then((d)=>{
        console.log(d);
    })
    })
    const store = new Store('../../../data/');
</script>

</body>



</html>
